<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>

    <script>


        var synth = new Tone.Synth().toMaster()


        function setRandomColor(e) {
            let r = Math.floor(Math.random()*255)
            let g = Math.floor(Math.random()*255)
            let b = Math.floor(Math.random()*255)
            e.style.backgroundColor = `rgb(${r},${g},${b})`
            let note = 440*(2*Math.random()-1)*100
            synth.triggerAttackRelease(note, '8n')
        }


        function addContainer() {
            let div = document.createElement('div')
            div.style.display = 'flex'
            div.style.flexDirection = 'row'
            for (let i=0; i<10; ++i) {
                let minidiv = document.createElement('div')
                minidiv.style.width = '40px'
                minidiv.style.height = '40px'
                minidiv.style.margin = '2px'
                setRandomColor(minidiv)

                minidiv.onclick = function() {

                    if (this.dataset.interval) {
                        clearInterval(this.dataset.interval)
                        this.dataset.interval = ''
                    } else {
                        minidiv.dataset.interval = setInterval(function() {
                            setRandomColor(minidiv)
                        }, 1000)
                    }
                }


                div.appendChild(minidiv)
            }
            document.body.appendChild(div)
        }

        addContainer()
        addContainer()
        addContainer()
        addContainer()
        addContainer()
        addContainer()
        addContainer()
        addContainer()


    </script>

</head>
<body>



<script src="https://cdnjs.cloudflare.com/ajax/libs/tone/13.1.23/Tone.min.js"></script>

</body>
</html>