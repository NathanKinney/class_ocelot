<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>JS ATM</title>

    <script>
        function date() {
            let today = new Date()
            return today.getFullYear() + '/' + (today.getMonth()) +'/'+ (today.getDate() +' '+(today.getMinutes()+':'+(today.getSeconds())))
        }

        function random_number_gen(){
            return '_' + Math.random().toString(36).substr(2, 9)

        }


        class Account {
            constructor(name) {
                this.balance = 0
                this.interest = .001
                this.name = name
                this.id = random_number_gen()
                this.transactions = []
                this.transaction_count = 0
                this.date_opened = date()
            }


            checkbalance() {
                this.transaction_count += 1
                this.transactions[this.transaction_count] = ('Check Balance', this.balance, date())
                return this.balance
            }

            deposit(amount) {
                this.balance += amount
                this.transaction_count += 1
                this.transactions[this.transaction_count] = ('Deposit', amount, date())
                return this.balance
            }

            check_withdrawal(amount) {
                return this.balance >= amount
            }

            withdraw(amount) {
                if (this.check_withdrawal(amount)){
                    this.balance -= amount
                    this.transaction_count += 1
                    this.transactions[this.transaction_count] = ('Withdrawal', amount, date())
                    return this.balance
                }

                else {
                    this.transaction_count+=1
                    this.transactions[this.transaction_count] = ('Failed Withdrawal', this.balance - amount)
                    return `Can't complete Transaction. Balance = ${this.balance}`
                }
            }
            check_interest(){
                this.transaction_count += 1
                this.transactions[this.transaction_count] = ('Check Interest', this.interest)
                let interest_2dec = (this.interest * this.balance).toFixed(2)
                return interest_2dec
                }
        }


        let shane = new Account('Shane')
        console.log(shane.deposit(1001))
        console.log(shane.deposit(2001))
        console.log(shane.withdraw(1000))
        console.log(shane.checkbalance())
        console.log(shane.check_interest())
        console.log(shane.withdraw(10000000))
        console.log(shane)

    </script>

</head>
<body>

</body>
</html>